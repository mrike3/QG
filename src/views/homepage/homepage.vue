<script setup>
import chatList from './components/chatList.vue'
import mailList from './components/mailList.vue'
import $http from '../../../public/js/axiosapi.js'
import {homeStore} from "./homeStore.js";
import {onBeforeMount, ref} from 'vue'
import Dflex from "../../components/flex.vue";

const store=homeStore()
onBeforeMount(()=>{
  $http.post('/home/getAdmin',{
    token:sessionStorage.getItem('token')
  }).then(res=>{
    if(res.data!=null){
      store.user.admin=res.data.admin
      store.user.email=res.data.email
      store.user.headImg=res.data.headImg
      store.user.nickName=res.data.nickName
    }
  }).catch(e=>{
    alert(e)
  })
})
</script>

<template>
<!--  我的账号-->
  <el-drawer v-model="store.MyAdminState" :direction="'ltr'" :title="'My Admin Information'">
    <template #default>
      <el-row style="width: 100%;height: 120px;" justify="center" align="middle">
        <el-col :span="11">
          <el-row justify="center" align="middle">
            <el-popover
                placement="right"
                title="提示"
                :width="100"
                trigger="click"
                content="this is your headImg"
            >
              <template #reference>
                <el-avatar v-if="store.user.headImg!=null" style="cursor: pointer" :size="120" shape="square" :src="store.user.headImg"></el-avatar>
                <el-avatar v-if="store.user.headImg==null" style="cursor: pointer" :size="120" shape="square" >user</el-avatar>
              </template>
            </el-popover>
          </el-row>
        </el-col>
        <el-col :span="1">
          <el-divider direction="vertical" style="height: 120px;margin-right: 10px"></el-divider>
        </el-col>
        <el-col :span="11">
          <el-row justify="start">
            <el-space direction="vertical" size="large" style="text-align: left" alignment="normal">
              <font size="5">
                <el-space>
                  <el-icon color="rgba(16,177,255,0.8)"><Avatar /></el-icon>
                  {{store.user.nickName}}
                </el-space>
              </font>
              <dv-decoration-6 style="width:200px;height:14px;" />
              <font color="#808080">QG admin：{{store.user.admin}}</font>
              <font color="#808080">Address：中国大陆</font>
            </el-space>
          </el-row>
        </el-col>
      </el-row>
      <el-divider content-position="center">
        <el-icon><Ship /></el-icon>
      </el-divider>
    </template>
    <template #footer>
      <el-button @click="store.exitLogin">
        <template #icon>
          <el-icon><Expand /></el-icon>
        </template>
        Exit login
      </el-button>
    </template>
  </el-drawer>
  <!--  朋友圈-->
  <el-drawer v-model="store.friendCircleState" :direction="'ltr'" :title="'Wechat Moments'">
    <template #default>
      <el-row justify="center" align="middle">
        <h1>朋友圈</h1>
      </el-row>
    </template>
  </el-drawer>

  <el-row style="width: 100%;height: 100vh;" justify="center" align="middle">
    <el-row justify="center" align="middle" style="backdrop-filter: blur(2px);box-shadow: -10px 0px 30px 5px lightgrey;">
      <el-row id="MyCenter" justify="center" align="middle">
        <el-avatar @click="store.MyAdminState=!store.MyAdminState" v-if="store.user.headImg!=null" style="margin-top: 20px;cursor: pointer" :size="35" shape="square" :src="store.user.headImg"></el-avatar>
        <el-avatar v-if="store.user.headImg==null" style="margin-top: 20px;cursor: pointer" :size="35" shape="square" @click="store.MyViewState=true">user</el-avatar>
        <svg @click="store.chatState=0" t="1721470083111" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="35959" width="20" height="20"><path d="M513.536 0l15.506286 0.219429 26.331428 1.462857 18.285715 1.682285 25.453714 3.364572 3.072 0.585143c175.542857 28.379429 319.926857 138.386286 384.877714 285.257143 19.456 45.056 31.890286 93.622857 35.474286 144.310857a366.957714 366.957714 0 0 0-142.409143-112.786286c-50.907429-103.277714-155.209143-181.833143-283.209143-206.336a446.756571 446.756571 0 0 0-67.291428-7.68L511.780571 109.714286l-16.969142 0.292571C278.528 118.052571 109.714286 277.211429 109.714286 467.382857c0 80.603429 29.257143 156.379429 84.333714 220.598857l16.091429 17.408 8.996571 8.850286 3.510857 3.145143a109.714286 109.714286 0 0 1 39.497143 80.603428l-0.219429 11.702858-3.584 48.932571 66.706286-36.352a109.714286 109.714286 0 0 1 56.027429-13.385143l11.702857 0.950857 6.144 1.024a366.884571 366.884571 0 0 0 91.867428 122.88c-38.838857-2.779429-88.795429-11.849143-113.152-15.213714l-185.490285 101.376c-18.066286 9.874286-40.009143 1.682286-49.005715-18.358857a44.178286 44.178286 0 0 1-3.657142-21.211429l13.019428-178.614857a416.036571 416.036571 0 0 1-39.936-40.228571C39.936 676.717714 0 576 0 467.236571 0 228.205714 196.608 30.866286 450.852571 3.291429l27.062858-2.267429 18.285714-0.804571L513.609143 0z m68.754286 727.478857c26.038857 4.315429 49.737143 17.554286 67.072 37.449143 24.868571 16.237714 52.516571 28.306286 81.627428 35.254857a75.264 75.264 0 1 1-75.337143 75.337143 204.361143 204.361143 0 0 0-27.794285-70.656 171.373714 171.373714 0 0 1-45.568-77.385143z m366.299428-145.993143a75.337143 75.337143 0 0 1 0.438857 150.674286c-24.941714 4.973714-48.786286 14.628571-70.217142 28.452571-20.992 22.016-47.542857 38.034286-76.8 46.372572 3.949714-26.185143 16.969143-50.102857 36.571428-67.803429a253.074286 253.074286 0 0 0 34.962286-82.212571 75.337143 75.337143 0 0 1 75.044571-75.483429z m-287.744-72.996571a114.249143 114.249143 0 0 1-36.571428 67.730286 253.293714 253.293714 0 0 0-34.962286 82.285714 75.337143 75.337143 0 1 1-75.483429-75.264c25.014857-4.973714 48.786286-14.628571 70.217143-28.452572 20.992-21.942857 47.542857-38.034286 76.8-46.299428z m97.499429-137.069714c28.16 11.702857 46.445714 39.131429 46.445714 69.632 4.900571 25.014857 14.409143 49.005714 28.086857 70.509714 21.942857 21.211429 37.741714 47.835429 45.933715 77.165714a113.517714 113.517714 0 0 1-67.218286-37.010286 255.122286 255.122286 0 0 0-82.066286-35.328 75.264 75.264 0 1 1 28.818286-144.969142z" fill="#1afa29" p-id="35960"></path></svg>
        <svg @click="store.chatState=1"  t="1721469942836" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="30862" width="20" height="20"><path d="M419 530.7c-3.7 0-7.5-0.6-11.2-2-47.9-17.2-88.4-48.7-117-91-35.9-53-49-116.7-36.9-179.5C266 195.4 301.8 141 354.8 105.1 407.7 69.2 471.5 56 534.3 68.2c62.8 12.1 117.2 47.9 153.1 100.9 35.9 53 49 116.7 36.9 179.5-12.1 62.8-47.9 117.2-100.9 153.1-16.1 10.9-33.5 19.9-51.7 26.6-17.1 6.4-36.1-2.5-42.4-19.6-6.3-17.1 2.5-36.1 19.6-42.4 13.1-4.8 25.7-11.3 37.4-19.3 38.4-26 64.3-65.4 73.1-110.8 8.7-45.5-0.8-91.7-26.7-130-26-38.4-65.4-64.3-110.8-73-45.4-8.7-91.7 0.7-130 26.7-79.2 53.6-100 161.7-46.3 240.9 20.7 30.6 50 53.4 84.7 65.9 17.2 6.2 26.1 25.1 19.9 42.3-4.9 13.3-17.6 21.7-31.2 21.7zM109.2 959.6c-18.2 0-33-14.8-33-33 0-166.1 71.6-364.1 412.9-364.1 65.4 0 123.7 7.2 173.4 21.4 17.5 5 27.7 23.3 22.7 40.8-5 17.5-23.3 27.7-40.8 22.7-43.8-12.5-96.1-18.8-155.3-18.8-236.6 0-346.8 94.7-346.8 298 0 18.2-14.8 33-33.1 33zM684.8 758.9h260.5V825H684.8zM768.2 893.5h135.5v66.1H768.2zM726.5 636.5h177.2v66.1H726.5z" fill="#ffffff" p-id="30863"></path></svg>
        <svg t="1721470135979" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="38854" width="20" height="20"><path d="M514.745507 460.848974l375.929693-215.605426-391.592441-176.11316-364.049808 176.11316L514.745507 460.848974z m-37.824185 54.507965L103.165774 300.779965c-44.676081-25.622261-42.369855-90.793183 3.972823-113.21433L471.188406 11.479188a64.071235 64.071235 0 0 1 54.191861-0.768742l391.586504 176.114644c47.946945 21.555942 51.713484 81.492591 5.913971 107.242481L540.235687 515.64633a64.037101 64.037101 0 0 1-63.280232-0.289391h-0.034133z m0 0" fill="#0379FB" p-id="38855"></path><path d="M546.96589 956.209716l382.912185-214.516128V293.21869L546.96589 516.223629v439.986087z m-64.053426 0V516.223629a64.053426 64.053426 0 0 1 31.834527-55.373171l382.912186-223.003455c42.691896-24.849067 96.272325 5.957009 96.272324 55.373171v448.474898a64.060846 64.060846 0 0 1-32.732382 55.886656L578.285449 1012.096371c-42.691896 23.92153-95.372986-6.954296-95.372985-55.886655z m0 0" fill="#E8541E" p-id="38856"></path><path d="M483.615907 518.658968v436.973449L94.936672 741.788568V295.193971c-19.451548-15.413426-26.932684-39.529368-22.851524-61.744232-23.333843 8.993391-41.200417 31.350725-41.200418 59.866899v448.47193A64.04749 64.04749 0 0 0 64.066783 797.933449l388.674782 213.840881c42.691896 23.477797 94.927768-7.399513 94.927768-56.140429V515.64633c0-1.374238 0.087559 1.359397 0 0-17.492591 9.834852-45.86778 10.815814-64.053426 3.012638z" fill="#F4A738" p-id="38857"></path></svg>
        <svg t="1721469614197" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18802" width="20" height="20"><path d="M768.700632 477.749895a29.103158 29.103158 0 0 1-30.800843-30.800842v-252.496842a35.570526 35.570526 0 0 0-36.944842-36.944843H257.562947v117.005474a30.800842 30.800842 0 0 1-61.574736 0V95.932632h504.993684a97.28 97.28 0 0 1 98.519579 98.519579v252.496842a33.118316 33.118316 0 0 1-30.800842 30.800842z" fill="#ffffff" p-id="18803"></path><path d="M873.418105 933.591579H134.413474a69.685895 69.685895 0 0 1-70.817685-70.817684V314.556632a69.685895 69.685895 0 0 1 70.817685-70.817685h240.181894a70.494316 70.494316 0 0 1 67.745685 46.18779l43.115789 120.077474c0 3.072 6.170947 6.170947 9.242947 6.170947h378.745264a69.685895 69.685895 0 0 1 70.817684 70.817684v375.646316a67.880421 67.880421 0 0 1-70.844632 70.952421zM137.485474 302.241684a8.084211 8.084211 0 0 0-9.242948 9.242948v551.154526a8.084211 8.084211 0 0 0 9.242948 9.242947h739.004631a8.084211 8.084211 0 0 0 9.242948-9.242947v-375.646316a8.084211 8.084211 0 0 0-9.242948-9.242947H497.744842a70.494316 70.494316 0 0 1-67.664842-46.18779l-43.115789-120.077473c0-3.072-6.170947-6.170947-9.242948-6.170948H137.539368z" fill="#ffffff" p-id="18804"></path></svg>
        <svg @click="store.friendCircleState=!store.friendCircleState" t="1721469651256" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20924" width="26" height="26"><path d="M511.9 959.1c-119.4 0-231.7-46.5-316.1-131-174.3-174.3-174.3-458 0-632.3C298.5 93.1 445.4 46.6 588.7 71.5c14.3 2.5 23.9 16.1 21.4 30.4-2.5 14.3-16.1 23.9-30.4 21.4-126.5-22-256.2 19.1-346.8 109.7C79 386.8 79 637.1 232.9 791c74.5 74.5 173.6 115.6 279 115.6s204.5-41 279-115.6 115.6-173.6 115.6-279-41-204.5-115.6-279c-15.4-15.4-32-29.5-49.6-42.1-11.8-8.4-14.5-24.9-6.1-36.6 8.5-11.8 24.9-14.5 36.6-6.1 19.9 14.2 38.7 30.3 56.1 47.6 84.4 84.4 131 196.7 131 316.1 0 119.4-46.5 231.7-131 316.1-84.3 84.6-196.6 131.1-316 131.1z" p-id="20925"></path><path d="M673.1 124.3m-26.3 0a26.3 26.3 0 1 0 52.6 0 26.3 26.3 0 1 0-52.6 0Z" p-id="20926"></path><path d="M413.9 590.6L255.3 432c-7.7 24.9-11.8 51.4-11.8 78.8 0 30.3 5 59.4 14.3 86.6h162.1c-2-2.2-4.1-4.5-6-6.8z m0 0" fill="#FE7598" p-id="20927"></path><path d="M765.7 424.2H603.6c2.1 2.2 4.1 4.5 6 6.8l158.6 158.6c7.7-24.9 11.8-51.4 11.8-78.8 0-30.3-5-59.4-14.3-86.6z m0 0" fill="#46A8FF" p-id="20928"></path><path d="M748.5 384.5C722 335 680.6 294.9 630.2 270L515.7 384.5h232.8z m0 0" fill="#B095FF" p-id="20929"></path><path d="M275.1 637.1c26.3 49.2 67.5 89.3 117.7 114.1l114.1-114.1H275.1z m0 0" fill="#FFA786" p-id="20930"></path><path d="M637.7 519.8v227.9c49.4-26.3 89.6-67.6 114.5-117.9L638 515.6l-0.3 4.2z m0 0" fill="#49E8CE" p-id="20931"></path><path d="M511.8 242.5c-30.3 0-59.4 5-86.6 14.3v162l164.7-164.7c-24.7-7.5-51-11.6-78.1-11.6z m0 0" fill="#FE7598" p-id="20932"></path><path d="M432.9 767.3c24.9 7.7 51.4 11.8 78.8 11.8 30.2 0 59.2-5 86.2-14.2V603c-2.1 1.9-4.2 3.8-6.4 5.6L432.9 767.3z m0 0M385.4 274.1c-49.2 26.3-89.3 67.6-114.1 117.7l114.1 114.1V274.1z m0 0" fill="#FFC64C" p-id="20933"></path></svg>
        <svg t="1721469720537" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="22989" width="20" height="20"><path d="M896 469.333333v128h-128v-128h128z m-298.666667 0v128h-128v-128h128z m-298.666666 0v128H170.666667v-128h128z" fill="#ffffff" p-id="22990"></path></svg>
        <svg style="margin-top: 20px" t="1721469758643" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="24901" width="20" height="20"><path d="M626.176 279.552c74.24 0 134.656 55.808 134.656 124.928 0 21.504-6.144 42.496-17.408 61.44-16.896 27.648-44.032 48.128-76.8 57.856-8.704 2.56-15.36 3.584-21.504 3.584-14.336 0-25.6-11.264-25.6-25.6s11.264-25.6 25.6-25.6c1.024 0 3.072 0 5.632-1.024 22.016-6.144 39.424-18.944 49.152-35.84 6.656-10.752 9.728-22.528 9.728-34.816 0-40.448-37.376-73.728-82.944-73.728-15.872 0-31.232 4.096-45.056 11.776-24.064 13.824-38.4 36.864-38.4 61.952v214.528c0 43.52-24.064 83.456-64 105.984-21.504 12.288-45.568 18.432-70.144 18.432-74.24 0-134.656-55.808-134.656-124.928 0-21.504 6.144-42.496 17.408-61.44 16.896-27.648 44.032-48.128 76.8-57.856 9.216-2.56 15.36-3.584 21.504-3.584 14.336 0 25.6 11.264 25.6 25.6s-11.264 25.6-25.6 25.6c-1.024 0-3.072 0-5.632 1.024-22.016 6.656-39.424 19.456-49.152 35.84-6.656 10.752-9.728 22.528-9.728 34.816 0 40.448 37.376 73.728 83.456 73.728 15.872 0 31.232-4.096 45.056-11.776 24.064-13.824 38.4-36.864 38.4-61.952V404.48c0-43.52 24.064-83.456 64-105.984 20.992-12.8 45.056-18.944 69.632-18.944z m-520.704 230.4c0 226.304 183.296 409.6 409.6 409.6s409.6-183.296 409.6-409.6-183.296-409.6-409.6-409.6-409.6 183.296-409.6 409.6z m-51.2 0c0-254.464 206.336-460.8 460.8-460.8s460.8 206.336 460.8 460.8-206.336 460.8-460.8 460.8-460.8-206.336-460.8-460.8z m0 0" fill="#ffffff" p-id="24902"></path></svg>
        <svg t="1721469792775" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="26919" width="20" height="20"><path d="M736.653061 929.959184H287.346939c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h449.306122c45.97551 0 83.591837 37.616327 83.591837 83.591837v668.734694c0 45.97551-37.616327 83.591837-83.591837 83.591837zM287.346939 135.836735c-22.987755 0-41.795918 18.808163-41.795919 41.795918v668.734694c0 22.987755 18.808163 41.795918 41.795919 41.795918h449.306122c22.987755 0 41.795918-18.808163 41.795919-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795919-41.795918H287.346939z" fill="#ffffff" p-id="26920"></path><path d="M616.489796 815.020408H407.510204c-11.493878 0-20.897959-9.404082-20.897959-20.897959s9.404082-20.897959 20.897959-20.897959h208.979592c11.493878 0 20.897959 9.404082 20.897959 20.897959s-9.404082 20.897959-20.897959 20.897959z" fill="#ffffff" p-id="26921"></path></svg>
        <svg t="1721469848775" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="28846" width="20" height="20"><path d="M0 184.32h153.6v-102.4H0v102.4z m307.2-102.4v102.4h716.8v-102.4H307.2z m-307.2 460.8h153.6v-102.4H0v102.4z m307.2 0h716.8v-102.4H307.2v102.4z m-307.2 358.4h153.6v-102.4H0v102.4z m307.2 0h716.8v-102.4H307.2v102.4z" fill="#ffffff" p-id="28847"></path></svg>
      </el-row>
      <chatList v-if="store.chatState==0" />
      <mailList v-if="store.chatState==1"/>
    </el-row>
  </el-row>
</template>

<style scoped>
#MyCenter{
  background-color: rgba(0,0,0,0.7);
  width: 55px;
  height: 500px;
  justify-content: space-around;
  flex-direction: column;
}
#MyCenter svg,img{
  cursor: pointer;
}
</style>